{% extends 'adminFolder/adminindex.html' %}
{% block body %}
<body style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); min-height: 100vh;">
    <div class="container-fluid py-4">
        <!-- Header Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card shadow-sm border-0">
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h1 class="h3 mb-1 text-primary"><i class="fas fa-tags me-2"></i>Category Management</h1>
                                <p class="text-muted mb-0">Manage product categories and their details</p>
                            </div>
                            <div class="badge bg-primary p-2">
                                <i class="fas fa-list me-1"></i>
                                <span id="categoryCount">{{ data|length }}</span> Categories
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search and Actions Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card shadow-sm border-0">
                    <div class="card-body p-4">
                        <div class="row g-3 align-items-center">
                            <div class="col-md-6">
                                <form method="post" action="/admin_view_complaints_search" class="d-flex">
                                    {% csrf_token %}
                                    <div class="input-group">
                                        <span class="input-group-text bg-light"><i class="fas fa-search"></i></span>
                                        <input class="form-control" type="search" placeholder="Search by category name..." name="search" aria-label="Search">
                                        <button class="btn btn-primary" type="submit">
                                            <i class="fas fa-search me-1"></i>Search
                                        </button>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6 text-md-end">
                                <a href="/admin_add_category" class="btn btn-success px-4">
                                    <i class="fas fa-plus-circle me-2"></i>Add New Category
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Categories Table -->
        <div class="row">
            <div class="col-12">
                <div class="card shadow-sm border-0">
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th class="ps-4">
                                            <i class="fas fa-tag me-2"></i>Category Name
                                        </th>
                                        <th>
                                            <i class="fas fa-info-circle me-2"></i>Category Details
                                        </th>
                                        <th class="text-center pe-4">
                                            <i class="fas fa-cogs me-2"></i>Actions
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in data %}
                                    <tr class="category-row">
                                        <td class="ps-4">
                                            <div class="d-flex align-items-center">
                                                <div class="category-icon bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                                    <i class="fas fa-folder"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-0 fw-semibold text-primary">{{ i.Categoryname }}</h6>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <p class="mb-0 text-muted" style="max-width: 400px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                                {{ i.Details }}
                                            </p>
                                        </td>
                                        <td class="text-center pe-4">
                                            <div class="btn-group btn-group-sm" role="group">
                                                <a href="/admin_edit_category/{{ i.id }}" class="btn btn-outline-primary">
                                                    <i class="fas fa-edit me-1"></i>Edit
                                                </a>
                                                <a href="/admin_delete_category/{{ i.id }}" class="btn btn-outline-danger"
                                                   onclick="return confirm('Are you sure you want to delete {{ i.Categoryname }}? This action cannot be undone.')">
                                                    <i class="fas fa-trash me-1"></i>Delete
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="3" class="text-center py-5">
                                            <div class="text-muted">
                                                <i class="fas fa-inbox fa-3x mb-3"></i>
                                                <h4>No Categories Found</h4>
                                                <p class="mb-3">Get started by adding your first category.</p>
                                                <a href="/admin_add_category" class="btn btn-primary">
                                                    <i class="fas fa-plus-circle me-2"></i>Add First Category
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <style>
        /* Custom styles for better appearance */
        .category-row:hover {
            background-color: #f8f9fa;
            transform: translateY(-1px);
            transition: all 0.2s ease;
        }

        .category-icon {
            transition: all 0.3s ease;
        }

        .category-row:hover .category-icon {
            transform: scale(1.1);
            background-color: #0d6efd !important;
            color: white !important;
        }

        .table th {
            border-bottom: 2px solid #e9ecef;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.875rem;
            letter-spacing: 0.5px;
        }

        .btn-group .btn {
            border-radius: 0.375rem;
            margin: 0 2px;
        }

        .card {
            border: none;
            border-radius: 0.75rem;
        }

        .table-responsive {
            border-radius: 0.75rem;
        }
    </style>

    <script>
        // Add interactive effects
        document.addEventListener('DOMContentLoaded', function() {
            // Add animation to table rows
            const rows = document.querySelectorAll('.category-row');
            rows.forEach((row, index) => {
                row.style.animationDelay = `${index * 0.1}s`;
                row.classList.add('animate__animated', 'animate__fadeInUp');
            });

            // Update category count
            document.getElementById('categoryCount').textContent = {{ data|length }};
            document.getElementById('activeCategories').textContent = {{ data|length }};
        });

        // Enhanced delete confirmation
        function confirmDelete(categoryName, element) {
            if (confirm(`Are you sure you want to delete "${categoryName}"? This action will permanently remove the category and cannot be undone.`)) {
                return true;
            } else {
                return false;
            }
        }

        // Add hover effects to action buttons
        document.querySelectorAll('.btn-group .btn').forEach(button => {
            button.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-1px)';
                this.style.transition = 'all 0.2s ease';
            });

            button.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>
{% endblock %}


{#{% extends 'adminFolder/adminindex.html' %}#}
{#{% block body %}#}
{#<body>#}
{#    <h1>Category</h1>#}
{#<form method="post" action="/admin_view_complaints_search" >#}
{#{% csrf_token %}#}
{#<table>#}
{#    <thead>#}
{#    <tr>#}
{#         <input class="form-control me-2" type="search" placeholder="Search by name" name="search" aria-label="Search" style="max-width: 300px;">#}
{#        <button class="btn btn-outline-success" type="submit">Search</button>#}
{#    </tr>#}
{#    </thead>#}
{#</table>#}
{#    <table border="1">#}
{##}
{##}
{#        <thead><tr>#}
{#            <a href="/admin_add_category">Add Category</a>#}
{#        </tr>#}
{#            <tr>#}
{#                <th>CategoryName</th>#}
{#                <th>CategoryDetails</th>#}
{#                <th>Actions</th>#}
{#            </tr>#}
{#        </thead>#}
{#        <tbody>#}
{#            {% for i in data %}#}
{#            <tr>#}
{#                <td>{{ i.Categoryname }}</td>#}
{#                <td>{{ i.Details }}</td>#}
{#                <td>#}
{#                <a href="/admin_edit_category/{{ i.id }}">Edit</a><br><br>#}
{#                <a href="/admin_delete_category/{{ i.id }}">Delete</a>#}
{##}
{#                </td>#}
{#            </tr>#}
{#            {% endfor %}#}
{#        </tbody>#}
{#    </table>#}
{#</form>#}
{#</body>#}
{#{% endblock %}#}